---
tags:
  - 多线程编程
---
>线程安全：**多个线程调用它们的同一个实例的某一个方法**时，是线程安全的。
>也可以理解为，它们的每个方法都是**原子性**的！
# 线程安全的类
---
- 所有的[[不可变类]]：String 和 Java基本类型包装类，如Integer、Double等
- StringBuffer
	- 注意，StringBuilder是线程不安全的
- Random
- Vector：是线程安全的List（本身不安全）实现
- HashTable：是线程安全的HashMap（本身不安全）实现
- java.util.concurrent包下的类

例如：
```java
Hashtable table = new Hashtable();

new Thread(()->{ 
	table.put("key", "value1"); 
}).start();

new Thread(()->{ 
	table.put("key", "value2"); 
}).start();
```

# 线程安全方法组合在一起不一定线程安全
----
例如：
```java
Hashtable table = new Hashtable(); 
// 线程1，线程2 
if( table.get("key") == null) { 
	table.put("key", value); 
}
```
![[CleanShot 2024-03-29 at 19.16.42@2x.png|480]]

当一些原子方法发生组合时，需要另外进行线程安全加锁控制
