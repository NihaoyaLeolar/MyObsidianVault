---
tags:
  - Redis实践项目-黑马点评
  - 锁
---
由于现在我们部署了多个tomcat，每个tomcat都有一个属于自己的jvm。
- 假设在服务器A的tomcat内部，有两个线程，这两个线程由于使用的是同一份代码，那么他们的锁对象是同一个，是可以实现互斥的。
- 但是如果现在是服务器B的tomcat内部，又有两个线程，但是**他们的锁对象写的虽然和服务器A一样，但是锁对象却不是同一个，所以线程3和线程4可以实现互斥，但是却无法和线程1和线程2实现互斥**。

这就是 集群环境下，syn锁失效的原因，在这种情况下，我们就需要使用**分布式锁**来解决这个问题。
![[CleanShot 2024-03-01 at 16.32.57@2x.png]]