# 例
----
两个线程，对初始值为0的共享静态变量，一个自增、一个自减，各做5000次，输出的结果不一定是0！
```java
private static int counter = 0;  
  
public static void main(String[] args) throws InterruptedException {  
    Thread t1 = new Thread(() -> {  
        for(int i = 0; i < 5000; i++)  
            counter++;  
    }, "t1");  
  
    Thread t2 = new Thread(() -> {  
        for(int i = 0; i < 5000; i++)  
            counter--;  
    }, "t2");  
  
    t1.start();  
    t2.start();  
    t1.join();  
    t2.join();  
  
    log.debug("{}",counter);  
}
```

以上的结果可能是正数、负数、零。
# 分析
---

因为 Java 中**对静态变量的自增、自减并不是原子操作**！

要彻底理解，必须从字节码来进行分析!
例如对于 i++/i-- 而言（i 为静态变量），实际会产生如下的 JVM 字节码指令：
```java
getstatic  i   //获取静态变量i的值
iconst_1       //准备常量1
iadd or isub   //自增 or 自减
putstatic  i   //将修改后的值存入静态变量i
```

两个线程的这4条指令，可能出现交错执行的情况！从而导致存入不及时，结果不正确！